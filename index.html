<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RussiGram (fake v1)</title>
    
    <!-- Favicon и иконки -->
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    
    <!-- PWA мета-теги -->
    <meta name="theme-color" content="#0088cc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="RussiGram (fake v1)">
    <link rel="manifest" href="site.webmanifest">
    
    <style>
        /* Все предыдущие стили остаются без изменений */
        
        /* Добавляем новые стили для меню и настроек */
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .menu-btn {
            margin-left: 15px;
            cursor: pointer;
            font-size: 20px;
            padding: 5px 10px;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 60px;
            right: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1001;
            min-width: 150px;
        }
        
        .dropdown-menu.show {
            display: block;
        }
        
        .menu-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .menu-item:last-child {
            border-bottom: none;
        }
        
        .menu-item:hover {
            background: #f8f8f8;
        }
        
        .settings-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1002;
        }
        
        .settings-modal.show {
            display: flex;
        }
        
        .settings-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 400px;
        }
        
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-btn {
            cursor: pointer;
            font-size: 20px;
        }
        
        .rainbow-mode {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .rainbow-mode input {
            margin-right: 10px;
        }
        
        /* Стили для радужного режима */
        .rainbow-bg {
            animation: rainbowBackground 10s infinite alternate;
        }
        
        @keyframes rainbowBackground {
            0% { background: #ff6b6b; }
            14% { background: #ff8e42; }
            28% { background: #ffd166; }
            42% { background: #9ee6a0; }
            57% { background: #4ecdc4; }
            71% { background: #4e7dc4; }
            85% { background: #9d4edd; }
            100% { background: #ff6b6b; }
        }
        
        .rainbow-chat .chat-item {
            animation: rainbowChats 8s infinite alternate;
        }
        
        @keyframes rainbowChats {
            0% { background: #ffe6ea; }
            25% { background: #e6f7ff; }
            50% { background: #f0e6ff; }
            75% { background: #e6ffea; }
            100% { background: #fffae6; }
        }
    </style>
</head>
<body>
    <div class="debug-info" id="debugInfo">Отладка: введите 8 цифр</div>
    
    <div class="login-screen" id="loginScreen">
        <!-- Без изменений -->
    </div>
    
    <div class="animation-screen" id="animationScreen">
        <!-- Без изменений -->
    </div>
    
    <div class="main-interface" id="mainInterface">
        <div class="header">
            <div class="logo-container">
                <div class="logo">RG</div>
                <div>RussiGram</div>
            </div>
            <div class="header-right">
                <div class="russian-flag"></div>
                <div class="menu-btn" id="menuBtn">☰</div>
            </div>
        </div>
        
        <!-- Выпадающее меню -->
        <div class="dropdown-menu" id="dropdownMenu">
            <div class="menu-item" id="settingsBtn">Настройки</div>
        </div>
        
        <div class="chats" id="chatsContainer">
            <!-- Без изменений -->
        </div>
        
        <div class="input-area">
            <input type="text" placeholder="Сообщение" id="messageInput">
            <button class="send-btn" id="mainSendBtn">Отправить</button>
        </div>
    </div>
    
    <!-- Модальное окно настроек -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-header">
                <h2>Настройки</h2>
                <div class="close-btn" id="closeSettings">×</div>
            </div>
            <div class="rainbow-mode">
                <input type="checkbox" id="rainbowModeToggle">
                <label for="rainbowModeToggle">Радужный Режим</label>
            </div>
        </div>
    </div>

    <script>
        // Все предыдущие функции остаются без изменений
        
        // Добавляем новые элементы DOM
        const menuBtn = document.getElementById('menuBtn');
        const dropdownMenu = document.getElementById('dropdownMenu');
        const settingsBtn = document.getElementById('settingsBtn');
        const settingsModal = document.getElementById('settingsModal');
        const closeSettings = document.getElementById('closeSettings');
        const rainbowModeToggle = document.getElementById('rainbowModeToggle');
        const chatsContainer = document.getElementById('chatsContainer');
        
        // Обработчики для меню и настроек
        menuBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdownMenu.classList.toggle('show');
        });
        
        settingsBtn.addEventListener('click', function() {
            dropdownMenu.classList.remove('show');
            settingsModal.classList.add('show');
        });
        
        closeSettings.addEventListener('click', function() {
            settingsModal.classList.remove('show');
        });
        
        // Закрывать меню и модальные окна при клике вне их
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown-menu') && !e.target.closest('.menu-btn')) {
                dropdownMenu.classList.remove('show');
            }
            
            if (e.target === settingsModal) {
                settingsModal.classList.remove('show');
            }
        });
        
        // Обработчик для радужного режима
        rainbowModeToggle.addEventListener('change', function() {
            if (this.checked) {
                document.body.classList.add('rainbow-bg');
                chatsContainer.classList.add('rainbow-chat');
                localStorage.setItem('rainbowMode', 'enabled');
            } else {
                document.body.classList.remove('rainbow-bg');
                chatsContainer.classList.remove('rainbow-chat');
                localStorage.setItem('rainbowMode', 'disabled');
            }
        });
        
        // Проверяем сохраненные настройки при загрузке
        window.addEventListener('load', function() {
            const rainbowMode = localStorage.getItem('rainbowMode');
            if (rainbowMode === 'enabled') {
                rainbowModeToggle.checked = true;
                document.body.classList.add('rainbow-bg');
                chatsContainer.classList.add('rainbow-chat');
            }
        });
    </script>
</body>
</html>
